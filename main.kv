#:kivy 2.2.1

<Label>:
    font_size:"14sp"
    font_name: "Noto Sans"
    halign: "center"

<DigitButton>:
    text: str(self.digit)
    font_size:"26sp"
    # border: 0,0,0,0
    background_color: "#000000"
    background_normal: "" # The default texture is grey, so just setting the background color will give a darker result. To set a plain color, set the background_normal to ''.
    background_down: ""
    canvas.before:
        Color:
            rgba: 1,1,1,1
        Line:
            width: 5
            rectangle: self.x, self.y, self.width, self.height
    
# <CircularButton>:
#     size: 50, 50 
#     canvas:
#         Color:
#             rgb: self.background_color if self.state == 'normal' else self.background_down
#         Ellipse:
#             pos: self.pos
#             size: self.size
#     on_release:
#         print("This is the button made up by the canvas")
        
<HomeScreen>:
    canvas:
        Rectangle:
            id: background
            source: 'assets/background-blur.jpg'
            pos: self.pos
            size: self.size
            
    RelativeLayout:
        Label:
            text: "[ GAME ]"
            font_size:"20sp"
            pos_hint: {'center_x': 0.5, 'y': 0.85}
            size_hint: 1, None

        Label:
            text: "Tenbin"
            font: "Noto Sans"
            font_size: "35sp"
            pos_hint: {'center_x': 0.5, 'y': 0.7}
            size_hint: 1, None
        TextInput:
            id: nickname
            hint_text:"Enter your name"
            font_name: "Noto Sans"
            font_size:"20sp"
            halign: 'center'
            valign: 'middle'
            multiline: False
            background_color: 0.6, 0.6, 0.6, 0.5
            foreground_color: "white"
            hint_text_color: "#AAAAAA"
            pos_hint: {'center_x': 0.5, 'y': 0.25}
            size_hint: 0.4, 0.125
        BoxLayout:
            pos_hint: {'center_x': 0.5, 'y': 0.05}
            size_hint: 0.4, 0.15
            spacing: 10
            Button:
                text: "Play Online"
                font_size:"20sp"
                background_color: 0, 0.7, 0, 1
                halign: 'center'
                on_press: root.modeSelection("online")
            Button:
                text: "Play Solo"
                font_size:"20sp"
                background_color: 0.7, 0, 0, 1
                halign: 'center'
                on_press: root.modeSelection("solo")
            # Button:
            #     text: "Goto settings"
            #     on_press: root.manager.current = "settings"

<JoinRoomScreen>:
    # canvas:
    #     Rectangle:
    #         id: background
    #         source: 'assets/background-blur.jpg'
    #         pos: self.pos
    #         size: self.size
    RelativeLayout:
        Label:
            id: titleLabel
            text: "Connecting to server"
            font_size:"20sp"
            pos_hint: {'center_x': 0.5, 'y': 0.85}
            size_hint: 1, None
        Label:
            id: bodyLabel
            font_size:"14sp"
            text: "Please wait..."
            pos_hint: {'center_x': 0.5, 'y': 0.7}
            size_hint: 1, None

            # wrap text
            size_hint_y: None
            text_size: self.width, None
            height: self.texture_size[1]
        BoxLayout:
            spacing: 35 # space between children
            pos_hint: {'center_x': 0.5, 'y': 0.2}
            size_hint: 0.8, 0.3
            BoxLayout:
                orientation: "vertical"
                Image:
                    id: pfp0
                    source: "assets/pfp.jpg"
                    opacity: 0 # hide
                    fit_mode: "scale-down"
                Label:
                    id: participantNickname0
            BoxLayout:
                orientation: "vertical"
                Image:
                    id: pfp1
                    source: "assets/pfp.jpg"
                    opacity: 0 # hide
                    fit_mode: "scale-down"
                Label:
                    id: participantNickname1
            BoxLayout:
                orientation: "vertical"
                Image:
                    id: pfp2
                    source: "assets/pfp.jpg"
                    opacity: 0 # hide
                    fit_mode: "scale-down"
                Label:
                    id: participantNickname2
            BoxLayout:
                orientation: "vertical"
                Image:
                    id: pfp3
                    source: "assets/pfp.jpg"
                    opacity: 0 # hide
                    fit_mode: "scale-down"
                Label:
                    id: participantNickname3
            BoxLayout:
                orientation: "vertical"
                Image:
                    id: pfp4
                    source: "assets/pfp.jpg"
                    opacity: 0 # hide
                    fit_mode: "scale-down"
                Label:
                    id: participantNickname4
        Button:
            pos_hint: {'x': 0.87, 'y': 0.05}
            size_hint: 0.1, None
            id: exitButton
            text: "Exit"
            background_color: 1, 0, 0
            halign: 'center'
            on_press: root.exitGame()
<GameScreen>:
    RelativeLayout:
        BoxLayout:
            pos_hint: {'x': 0.07, 'y': 0.73}
            size_hint: 0.35,0.2
            # wrapper for guess label for it to position correctly initially
            GuessLabel:
                # background_color set in code for consistency
                font_size: "35sp"
                id: guessLabel
                text: ""
        Label:
            pos_hint: {'x': 0.07, 'y': 0.1}
            size_hint: 0.35,0.6
            id: infoLabel
            text: "info"
        GridLayout:
            id: numpad
            cols: 3
            pos_hint: {'x': 0.45, 'y': 0.1}
            size_hint: 0.35,0.8
            Label:
                text: ""
            Label:
                text: ""
            # DigitButtons will be rendered in code
            # DigitButton:
            #     digit: 0
            # DigitButton:
            #     digit: 1
            # DigitButton:
            #     digit: 2
            # DigitButton:
            #     digit: 3
            # DigitButton:
            #     digit: 4
            # DigitButton:
            #     digit: 5
            # DigitButton:
            #     digit: 6
            # DigitButton:
            #     digit: 7
            # DigitButton:
            #     digit: 8
            # DigitButton:
            #     digit: 9
        Button:
            background_normal: "assets/cancel.png"
            background_down: "assets/cancel_down.png"
            border: 0,0,0,0 # Or else the image would look weird
            pos_hint: {'x': 0.87, 'y': 0.74}
            size_hint: 0.073125,0.13
            on_press: root.cancelPressed()
        Button:
            background_normal: "assets/backspace.png"
            background_down: "assets/backspace_down.png"
            border: 0,0,0,0
            pos_hint: {'x': 0.87, 'y': 0.58}
            size_hint: 0.073125,0.13
            on_press: root.backspacePressed()
        Image:
            source: "assets/clock.png"
            pos_hint: {'x': 0.87, 'y': 0.37}
            size_hint: 0.073125,0.13
        Label:
            id: timer
            text: "1m30s"
            font_size:"20sp"
            pos_hint: {'x': 0.87, 'y': 0.27}
            size_hint: 0.073125,0.13
        Button:
            background_normal: "assets/confirm.png"
            background_down: "assets/confirm_down.png"
            border: 0,0,0,0
            pos_hint: {'x': 0.87, 'y': 0.12}
            size_hint: 0.073125,0.13
            on_press: root.confirmPressed()

<StatusScreen>:
    BoxLayout:
        Label:
            text: "hello"


<SettingsScreen>:
    BoxLayout:
        Button:
            text: "My settings button"
        Button:
            text: "Back to home"
            on_press: root.manager.current = "home"

